# åŸå‹

## [[Prototype]]

åœ¨ JavaScript ä¸­ï¼Œå¯¹è±¡æœ‰ä¸€ä¸ªç‰¹æ®Šçš„éšè—å±æ€§ [[Prototype]] ï¼Œå®ƒè¦ä¹ˆä¸º nullï¼Œè¦ä¹ˆå°±æ˜¯å¯¹å¦ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ã€‚è¯¥å¯¹è±¡è¢«ç§°ä¹‹ä¸º â€åŸå‹â€œã€‚



## åŸå‹ç»§æ‰¿

å½“æˆ‘ä»¬ä»ä¸€ä¸ªå¯¹è±¡ä¸­è¯»å–ä¸€ä¸ªç¼ºå¤±çš„å±æ€§æ—¶ï¼ŒJavaScript ä¼šè‡ªåŠ¨å°è¯•ä»åŸå‹ä¸­è·å–è¯¥å±æ€§ï¼Œè¿™è¢«ç§°ä¸ºâ€åŸå‹ç»§æ‰¿â€œã€‚

```js
let animal = {
  eats: true,
};
let rabbit = {
  jumps: true,
}

// [[Prototype]] æ˜¯å†…éƒ¨çš„è€Œä¸”æ˜¯éšè—çš„ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® __proto__ æ¥æŒ‡å®šåŸå‹
rabbit.__proto__ = animal;

console.log(rabbit.eats); // true
```

åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ç§° rabbit çš„åŸå‹æ˜¯ animalï¼Œeats æ˜¯ rabbit ä» animal ä¸­é€šè¿‡åŸå‹ç»§æ‰¿è€Œæ¥ã€‚



## åŸå‹é“¾

å½“åŸå‹ç›¸äº’ä¸²è”ï¼Œå°±å½¢æˆäº†åŸå‹é“¾ã€‚

```js
let animal = {
  eats: true,
  walk(){
    console.log("Animal Walk");
  },
}

let rabbit = {
  jump: true,
  __proto__: animal,
}

let longEar = {
  earLength: 10,
  __proto__: rabbit,
}

longEar.walk(); // Animal Walk
```

**æ³¨æ„ï¼š**

- å¼•ç”¨ä¸èƒ½å½¢æˆé—­ç¯ã€‚å¦‚æœæˆ‘ä»¬è¯•å›¾åœ¨ä¸€ä¸ªé—­ç¯ä¸­åˆ†é… \_\_proto\_\_ ï¼ŒJavaScript ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚
- \__proto__ çš„å€¼å¯ä»¥æ˜¯å¯ä»¥æ˜¯å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯ nullã€‚å…¶ä»–ç±»å‹éƒ½ä¼šè¢«å¿½ç•¥ã€‚
- \_\_proto\_\_ æ˜¯ [[Prototype]] å› å†å²åŸå› ç•™ä¸‹æ¥çš„ getter/setterã€‚ç°ä»£ç¼–ç¨‹è¯­è¨€å»ºè®®æˆ‘ä»¬ä½¿ç”¨ Object.getPrototypeOf/Object.setPrototypeOf æ¥å–ä»£ \__proto__ æ“ä½œåŸå‹ã€‚



##   for in

```js
let animal = {
  eats: true
}

let rabbit = {
  jumps: true,
  __proto__: animal
}

console.log(Object.keys(rabbit)); // ['jumps']

for(let prop in rabbit) console.log(prop); // jumps eats 

for(let prop in rabbit) {
  rabbit.hasOwnProperty(prop) && console.log(prop); // jumps
}
```

- for in ä¼šè·å– rabbit çš„æ‰€æœ‰å¯æšä¸¾çš„å±æ€§åï¼ŒåŒ…æ‹¬ç»§æ‰¿çš„å±æ€§ã€‚
- rabbit.hasOwnProperty() å¯ä»¥åˆ¤æ–­å±æ€§æ˜¯å¦æ˜¯ç»§æ‰¿å¾—æ¥çš„ã€‚
- hasOwnProperty æ¥è‡ª Object.prototype.hasOwnPropertyã€‚
- hasOwnProperty æ²¡æœ‰å‡ºç°åœ¨ for in ä¸­ï¼Œå› ä¸º hasOwnProperty æ˜¯ä¸å¯æšä¸¾çš„ï¼Œå³æœ‰ enumerable: false æ ‡å¿—ã€‚
- Object.keys()ï¼ŒObject.values()ï¼ŒObject.entries() éƒ½ä¼šå¿½ç•¥ç»§æ‰¿çš„å±æ€§ã€‚



## ğŸŒ°

```js
let hamster = {
  stomach: [],
  
  eat(food) {
    this.stomach.push(food);
  }
};

let speedy = {
  __proto__: hamster
};

let lazy = {
  __proto__: hamster
}

speedy.eat('apple');
console.log(speedy.stomach); // apple
console.log(lazy.stomach); // apple
```



# å‡½æ•°åŸå‹

æ¯ä¸ªå‡½æ•°éƒ½ä¼šæœ‰ â€œprototypeâ€ å±æ€§ï¼Œå³ä½¿æˆ‘ä»¬æ²¡æœ‰æä¾›å®ƒã€‚

é»˜è®¤çš„ â€œprototypeâ€ æ˜¯ä¸€ä¸ªåªæœ‰å±æ€§ constructor çš„å¯¹è±¡ï¼Œå±æ€§ constructor æŒ‡å‘å‡½æ•°è‡ªèº«ã€‚

```js
function Rabbit() {}

/*
Rabbit.prototype = { constructor: Rabbit };
*/

const flag = Rabbit.prototype.constructor === Rabbit;
console.log(flag); // true
```

constructor å±æ€§å¯ä»¥é€šè¿‡ [[Prototype]] ä¼ é€’ä¸‹å»

```js
function Rabbit(){}

let rabbit = new Rabbit();

console.log(rabbit.constructor === Rabbit); // true
```



æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ constructor å±æ€§æ¥åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä½¿ç”¨ä¸ç°æœ‰å¯¹è±¡ç›¸åŒçš„æ„é€ å™¨ã€‚

```js
function Rabbit(name){
  this.name = name;
  console.log(name);
}

let rabbit = new Rabbit("White Rabbit");

let rabbit2 = new rabbit.constructor("Black Rabbit");
```



JavaScript è‡ªèº«å¹¶ä¸èƒ½ä¿è¯æ­£ç¡®çš„ â€œconstructorâ€ å‡½æ•°å€¼ã€‚

```js
function Rabbit(){}
Rabbit.prototype = {
  jumps: true,
}

let rabbit = new Rabbit();
console.log(rabbit.constructor === Rabbit); // false
```



å› æ­¤ï¼Œä¸ºäº†ä¿è¯æ­£ç¡®çš„ â€œconstructorâ€ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©æ·»åŠ /åˆ é™¤å±æ€§åˆ°é»˜è®¤ â€œprototypeâ€ï¼Œè€Œä¸æ˜¯å°†å…¶æ•´ä¸ªè¦†ç›–ã€‚

```js
function Rabbit(){}


```

