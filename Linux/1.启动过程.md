# Linux 系统启动过程

**阶段：**

1. 内核引导。
2. 运行 init。
3. 系统初始化。
4. 建立终端。
5. 用户登录系统。



## 内核引导

当计算机打开电源后，首先是 BIOS 开机自检，按照 BIOS 中设置的启动设备（通常是硬盘）来启动。

操作系统接管硬件以后，首先读入 \boot 目录下的内核文件。



## 运行 init

init 进程是系统所有进程的起点，可以把它比拟成系统所有进程的源头，没有这个进程，系统中任何进程都不会启动。

init 程序首先是需要读取配置文件 /etc/inittab。



**运行级别：**

许多程序需要开机启动。它们在 windows 叫做 “服务”（service），在 Linux 中叫做 “守护进程”（daemon）。

init 进程的一大任务，就是去运行这些开机启动的程序。

不同场合需要启动的程序不同，比如用作服务器时，需要启动 Apache，用作桌面这不需要。

Linux 允许为不同的场合，分配不同的开机启动程序，这就叫 “运行级别”（runlevel）。也就是说，启动时根据 “运行级别”，确定需要运行那些程序。

Linux 系统有 7 个运行级别：

- 0：系统停机状态，系统默认运行级别不能设为 0 ，否则不能正常启动。
- 1：但用户工作状态，root 权限，用于系统维护，禁止远程登录。
- 2：多用户状态（没有 NFS）
- 3：完全的多用户状态（有 NFS），登陆后进入控制台命令行模式。
- 4：系统未使用，保留。
- 5：x11 控制台，登陆后进入 GUI 模式。
- 6：系统正常关闭并重启，默认运行级别不能设为 6，否则不能正常启动。



## 系统初始化

它主要完成的工作有：激活交换分区，检查磁盘，加载硬件模块以及其它一些需要优先执行任务。



## 建立终端



## 用户登录系统

**登录方式：**

- 命令行登录
- ssh 登录
- 图像界面登录



## 关机

在 Linux 领域内大多数用在服务器上，很少遇到关机的情况。

毕竟一个服务器上跑的服务是永无止境的，除非特殊情况下，不得已才会关机。

正确的**关机流程**：

1. sync
2. shutdown
3. reboot
4. halt

```bash
sync # 将数据由内存同步到硬盘中
shutdown # 关机指令
shutdown -h 10 '服务将在十分钟后关闭' # 告诉大家，计算机将在 10 分钟后关闭，并显示在登录用户的屏幕上
shutdown -h now # 立马关机
shutdwn -h 20:25 # 今天 20:25 关机
shutdown -h +10 # 十分钟后关机
shutdown -r now # 立马重启
shutdown -r +10 # 十分钟后重启
reboot # 重启，等同于 shutdown -r now
halt # 关闭系统，等同于 shutdown -h now 和 poweroff
```

