#### 做了些什么？

- 数据概览迭代：React（class组件） + Echarts（柱图，矩形树图）+ TypeScript （type起别名）
- 历史bug修改：
  - 遇到问题：
    - 各种ref嵌套，无规律，无限制的父调子，嵌套层级深，代码难以读懂。
    - 非币要使用dva，非全局数据存入全局，会导致代码数据复杂。
    - 非必要的使用websocket，本质是不需要服务器实时数据的。
  - 解决方案：重构代码，改写ref写法。
- 问卷模块：
  - 卡片视图，做了一个自适应布局，通过js的dom操作实现。
  - antd 列表，增删查改。
  - 皮肤模块，自定义皮肤，上传图片转base64。
  - 体会：
    - 样式还原问题，需要尽可能100%还原。
    - 提前规划问题，合理沟通（前后端协调方案）。
- 价格监控：
  - element-ui组件库换位antd组件库。
    - 发现问题：element-ui，table的页码叫pageIndex，antd的页码叫current，原来代码主要是pageIndex，后面又出现current，导致代码不统一，包括返回结果的数量，有时叫total，有时叫count。
  - 其他一些内容：增删查改。
  - 问题：
    - 历史模块大量的遗留问题，全部交由我们来修改，头痛。
- 运营平台开发（umi框架）：
  - 店铺管理：增删查改。
- 数据概览重构：去除dva，由父级保存state。
- 新数据源接入：
  - 问题：
    - 老代码没有很好的扩展性，接入新数据源需要在代码中进行大量重复配置，少配置一个地方对应的模块就会产生问题。
  - 修改了头部筛选器的组件（indexdb，localstorage存了大量数据）。
- 运营平台迁移（hook，next，next/router）：
  - 去除dva，dva代码转为state存储，主要是将dva的state该为组件的state，effect该为正常函数。
  - antd树选择器，树表格的使用，以及树操作（递归等）。
  - 运营平台权限，权限树控制所有权限，权限分配角色，控制受权限控制界面和操作的显示。





#### 学会了什么？

技术层面：React，Echarts，Dva，Next，IndexDB，Ant Design，WebSocket...

交流层面：及时沟通，语言表达能力...

开发层面：提前规划，讨论开发方案...

学习层面：能够看一些官网来找答案（包括英文网站）



#### 有什么体会？

规范开发：

- 没有组件库。
- 没有接口文档。
- 没有ui规范。
- 迭代太赶人，不能去优化原来的代码。

